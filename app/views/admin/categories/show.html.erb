<div style="padding: 2rem;">
  <div style="margin-bottom: 2rem;">
    <%= link_to '‚Üê –ù–∞–∑–∞–¥ –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º', admin_categories_path, style: 'color: var(--primary); font-weight: 500;' %>
  </div>

  <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 2rem;">
    <div>
      <h1 style="font-size: 1.875rem; font-weight: 700; color: var(--gray-900); margin-bottom: 0.5rem;">
        <%= @category.name %>
      </h1>
      <% if @category.description.present? %>
        <p style="color: var(--gray-600); margin-bottom: 1rem;"><%= @category.description %></p>
      <% end %>
      <div style="display: flex; gap: 1rem; align-items: center;">
        <code style="font-size: 0.875rem; color: var(--secondary); background: rgba(147, 51, 234, 0.05); padding: 0.25rem 0.5rem; border-radius: 4px;">
          <%= @category.slug %>
        </code>
        <span class="badge badge-secondary">–ü–æ–∑–∏—Ü–∏—è: <%= @category.position || 0 %></span>
      </div>
    </div>

    <div style="display: flex; gap: 0.75rem; align-items: center;">
      <%= link_to '–ò–∑–º–µ–Ω–∏—Ç—å', edit_admin_category_path(@category), class: 'btn btn-primary' %>
      <% if @category.products.any? %>
        <button type="button" disabled class="btn btn-outline" style="background: var(--gray-100); color: var(--gray-500); cursor: not-allowed; border-color: var(--gray-300);" title="–ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Å –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏">
          –£–¥–∞–ª–∏—Ç—å (–µ—Å—Ç—å <%= @category.products.count %> <%= Russian::p(@category.products.count, '–ø—Ä–æ–¥—É–∫—Ç', '–ø—Ä–æ–¥—É–∫—Ç–∞', '–ø—Ä–æ–¥—É–∫—Ç–æ–≤') %>)
        </button>
      <% else %>
        <%= button_to '–£–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é',
          admin_category_path(@category),
          method: :delete,
          data: { confirm: '–£–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.' },
          class: 'btn btn-outline',
          style: 'color: #DC2626; border-color: #DC2626;',
          form: { style: 'display: inline;' }
        %>
      <% end %>
    </div>
  </div>

  <!-- Stats -->
  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
    <div class="admin-stat-card">
      <div style="font-size: 0.875rem; color: var(--gray-600); margin-bottom: 0.5rem;">–í—Å–µ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤</div>
      <div style="font-size: 2rem; font-weight: 700; color: var(--primary);"><%= @category.products.count %></div>
    </div>

    <div class="admin-stat-card">
      <div style="font-size: 0.875rem; color: var(--gray-600); margin-bottom: 0.5rem;">–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ</div>
      <div style="font-size: 2rem; font-weight: 700; color: var(--secondary);"><%= @category.products.published.count %></div>
    </div>

    <div class="admin-stat-card">
      <div style="font-size: 0.875rem; color: var(--gray-600); margin-bottom: 0.5rem;">–ß–µ—Ä–Ω–æ–≤–∏–∫–æ–≤</div>
      <div style="font-size: 2rem; font-weight: 700; color: var(--accent);"><%= @category.products.draft.count %></div>
    </div>
  </div>

  <!-- Products Table -->
  <div class="card">
    <div style="padding: 1.5rem; border-bottom: 1px solid var(--gray-200);">
      <h2 style="font-size: 1.25rem; font-weight: 600; color: var(--gray-900);">–ü—Ä–æ–¥—É–∫—Ç—ã –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</h2>
    </div>

    <% if @products.any? %>
      <div style="overflow-x: auto;">
        <table class="admin-table" style="width: 100%; min-width: 800px;">
        <thead>
          <tr>
            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
            <th>–¢–∏–ø</th>
            <th>–¶–µ–Ω–∞</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
            <th>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
          </tr>
        </thead>
        <tbody>
          <% @products.each do |product| %>
            <tr>
              <td>
                <div style="font-weight: 600; color: var(--gray-900);"><%= product.name %></div>
                <div style="font-size: 0.875rem; color: var(--gray-600); margin-top: 0.25rem;">
                  <%= truncate(product.description, length: 60) %>
                </div>
              </td>
              <td>
                <span class="badge badge-secondary">
                  <%= product.product_type.humanize %>
                </span>
              </td>
              <td style="font-weight: 600; color: var(--gray-900);">
                <%= humanized_money_with_symbol(product.price) %>
              </td>
              <td>
                <% if product.published? %>
                  <span class="badge badge-success">–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω</span>
                <% elsif product.draft? %>
                  <span class="badge badge-warning">–ß–µ—Ä–Ω–æ–≤–∏–∫</span>
                <% else %>
                  <span class="badge badge-secondary">–ê—Ä—Ö–∏–≤</span>
                <% end %>
              </td>
              <td style="color: var(--gray-600); font-size: 0.875rem;">
                <%= l(product.created_at, format: :short) %>
              </td>
              <td>
                <%= link_to '–ü–æ–¥—Ä–æ–±–Ω–µ–µ', admin_product_path(product), class: 'btn btn-sm btn-outline' %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
      </div>

      <!-- Pagination -->
      <div style="padding: 1.5rem; border-top: 1px solid var(--gray-200); display: flex; justify-content: center;">
        <%= paginate @products %>
      </div>
    <% else %>
      <div style="padding: 3rem; text-align: center; color: var(--gray-600);">
        <div style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.3;">üì¶</div>
        <div style="font-weight: 600; margin-bottom: 0.5rem;">–ù–µ—Ç –ø—Ä–æ–¥—É–∫—Ç–æ–≤</div>
        <div style="font-size: 0.875rem;">–í —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–∫–∞ –Ω–µ—Ç –ø—Ä–æ–¥—É–∫—Ç–æ–≤</div>
      </div>
    <% end %>
  </div>
</div>
