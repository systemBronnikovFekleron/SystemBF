<% credentials = integration.credentials_hash %>

<div style="margin-bottom: var(--space-5);">
  <%= label_tag 'integration_setting[credentials][bot_token]', 'Bot Token', style: "display: block; font-weight: 600; color: var(--gray-700); margin-bottom: var(--space-2);" %>
  <%= text_field_tag 'integration_setting[credentials][bot_token]', credentials[:bot_token],
      placeholder: '123456789:ABCdefGHIjklMNOpqrsTUVwxyz',
      style: "width: 100%; padding: var(--space-3); border: 2px solid var(--gray-200); border-radius: var(--radius-md); font-size: 1rem; font-family: monospace;" %>
  <% if credentials[:bot_token].present? %>
    <p style="font-size: 0.75rem; color: var(--gray-600); margin-top: var(--space-2);">
      Текущий токен: <%= integration.masked_credentials[:bot_token] %>
    </p>
  <% end %>
  <p style="font-size: 0.75rem; color: var(--gray-600); margin-top: var(--space-2);">
    Получить токен можно у <a href="https://t.me/BotFather" target="_blank" style="color: var(--primary);">@BotFather</a>
  </p>
</div>

<div style="margin-bottom: var(--space-5);">
  <%= label_tag 'integration_setting[credentials][webhook_url]', 'Webhook URL (опционально)', style: "display: block; font-weight: 600; color: var(--gray-700); margin-bottom: var(--space-2);" %>
  <%= text_field_tag 'integration_setting[credentials][webhook_url]', credentials[:webhook_url],
      placeholder: 'https://yoursite.com/webhooks/telegram/YOUR_TOKEN',
      style: "width: 100%; padding: var(--space-3); border: 2px solid var(--gray-200); border-radius: var(--radius-md); font-size: 0.875rem; font-family: monospace;" %>
  <p style="font-size: 0.75rem; color: var(--gray-600); margin-top: var(--space-2);">
    URL для получения обновлений от Telegram. Webhook устанавливается автоматически.
  </p>
</div>

<div style="padding: var(--space-4); background: rgba(79, 70, 229, 0.05); border-left: 4px solid var(--primary); border-radius: var(--radius-md);">
  <div style="display: flex; gap: var(--space-3);">
    <div style="font-size: 1.25rem;">ℹ️</div>
    <div style="font-size: 0.875rem; color: var(--primary-dark);">
      <strong>Webhook маршрут:</strong><br>
      <code style="background: white; padding: var(--space-1) var(--space-2); border-radius: var(--radius-sm); margin-top: var(--space-1); display: inline-block;">
        <%= webhooks_telegram_path(':token') %>
      </code>
    </div>
  </div>
</div>
