<% credentials = integration.credentials_hash %>

<div style="margin-bottom: var(--space-5);">
  <%= label_tag 'integration_setting[credentials][public_id]', 'Public ID', style: "display: block; font-weight: 600; color: var(--gray-700); margin-bottom: var(--space-2);" %>
  <%= text_field_tag 'integration_setting[credentials][public_id]', credentials[:public_id],
      placeholder: 'pk_XXXXXXXXXXXXXXXXXXXXXXXX',
      style: "width: 100%; padding: var(--space-3); border: 2px solid var(--gray-200); border-radius: var(--radius-md); font-size: 1rem; font-family: monospace;" %>
  <p style="font-size: 0.75rem; color: var(--gray-600); margin-top: var(--space-2);">
    Публичный идентификатор сайта в CloudPayments
  </p>
</div>

<div style="margin-bottom: var(--space-5);">
  <%= label_tag 'integration_setting[credentials][api_secret]', 'API Secret', style: "display: block; font-weight: 600; color: var(--gray-700); margin-bottom: var(--space-2);" %>
  <%= password_field_tag 'integration_setting[credentials][api_secret]', credentials[:api_secret],
      placeholder: credentials[:api_secret].present? ? '••••••••' : 'Введите API Secret',
      style: "width: 100%; padding: var(--space-3); border: 2px solid var(--gray-200); border-radius: var(--radius-md); font-size: 1rem; font-family: monospace;" %>
  <% if credentials[:api_secret].present? %>
    <p style="font-size: 0.75rem; color: var(--gray-600); margin-top: var(--space-2);">
      Текущий secret: <%= integration.masked_credentials[:api_secret] %>. Оставьте поле пустым, чтобы не изменять.
    </p>
  <% end %>
  <p style="font-size: 0.75rem; color: var(--gray-600); margin-top: var(--space-2);">
    Секретный ключ для проверки подписи webhook уведомлений
  </p>
</div>

<div style="padding: var(--space-4); background: #fef3c7; border-left: 4px solid #f59e0b; border-radius: var(--radius-md);">
  <div style="display: flex; gap: var(--space-3);">
    <div style="font-size: 1.25rem;">⚠️</div>
    <div style="font-size: 0.875rem; color: #92400e;">
      <strong>Webhook URLs для CloudPayments:</strong><br>
      <div style="margin-top: var(--space-2); font-family: monospace; background: white; padding: var(--space-2); border-radius: var(--radius-sm);">
        <div>Pay: <%= webhooks_cloudpayments_pay_url %></div>
        <div>Fail: <%= webhooks_cloudpayments_fail_url %></div>
        <div>Refund: <%= webhooks_cloudpayments_refund_url %></div>
      </div>
    </div>
  </div>
</div>
