<% content_for :title, "–ú–æ–∏ –∑–∞—è–≤–∫–∏ - –°–∏—Å—Ç–µ–º–∞ –ë—Ä–æ–Ω–Ω–∏–∫–æ–≤–∞" %>

<section class="container" style="padding: 3rem 0;">
  <h1 class="text-gradient" style="margin-bottom: 2rem;">üìã –ú–æ–∏ –∑–∞—è–≤–∫–∏</h1>

  <% if @order_requests.any? %>
    <div style="display: flex; flex-direction: column; gap: 1.5rem;">
      <% @order_requests.each do |request| %>
        <div class="card" style="transition: all 0.3s ease; cursor: pointer;"
             onclick="window.location.href='<%= order_request_path(request) %>'">
          <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
            <div>
              <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                <span style="font-weight: 700; font-size: 1.125rem; color: var(--gray-900);">
                  <%= request.request_number %>
                </span>
                <%= render partial: 'shared/order_request_status_badge', locals: { status: request.status } %>
              </div>
              <p style="color: var(--gray-600); font-size: 0.875rem;">
                <%= l(request.created_at, format: :long) %>
              </p>
            </div>
            <div style="text-align: right;">
              <div style="font-size: 1.5rem; font-weight: 700; color: var(--primary);">
                <%= humanized_money_with_symbol(request.total) %>
              </div>
            </div>
          </div>

          <div style="padding-top: 1rem; border-top: 1px solid var(--gray-200);">
            <div style="display: flex; align-items: center; gap: 1rem;">
              <span style="font-size: 2rem;"><%= product_icon(request.product.product_type) %></span>
              <div style="flex: 1;">
                <h3 style="font-size: 1.125rem; margin-bottom: 0.25rem;">
                  <%= request.product.name %>
                </h3>
                <p style="color: var(--gray-600); font-size: 0.875rem;">
                  <%= product_type_label(request.product.product_type) %>
                </p>
              </div>
              <% if request.status_approved? && !request.order %>
                <%= link_to "–û–ø–ª–∞—Ç–∏—Ç—å",
                            payment_options_order_request_path(request),
                            class: "btn btn-primary",
                            onclick: "event.stopPropagation();" %>
              <% elsif request.order %>
                <%= link_to "–ö –∑–∞–∫–∞–∑—É",
                            order_path(request.order),
                            class: "btn btn-success",
                            onclick: "event.stopPropagation();" %>
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    </div>

    <%= paginate @order_requests %>
  <% else %>
    <div class="card" style="text-align: center; padding: 3rem;">
      <div style="font-size: 4rem; margin-bottom: 1rem;">üì≠</div>
      <h3 style="margin-bottom: 1rem;">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞—è–≤–æ–∫</h3>
      <p style="color: var(--gray-600); margin-bottom: 2rem;">
        –í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–π –≤–∞—Å –ø—Ä–æ–¥—É–∫—Ç –∏ –æ—Ñ–æ—Ä–º–∏—Ç–µ –∑–∞—è–≤–∫—É
      </p>
      <%= link_to "–ü–µ—Ä–µ–π—Ç–∏ –≤ –º–∞–≥–∞–∑–∏–Ω", products_path, class: "btn btn-primary btn-lg" %>
    </div>
  <% end %>
</section>
